<!-- Add Font Awesome CDN -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">

<!-- Recommended Products Section -->
<div class="container mt-4">
  <div class="row">
    <!-- Title Card -->
    <div class="col-12">
      <div class="card bg-light shadow-sm mb-3">
        <div class="card-body d-flex justify-content-center align-items-center text-center">
          <h5 class="fw-bold m-0">Recommended Products</h5>
        </div>
      </div>
    </div>
  </div>

  <!-- Recommended Products Grid -->
  <div class="row row-cols-2 row-cols-md-3 row-cols-lg-4 g-2">
    {% for recommend in most_recommended_products %}
    <div class="col">
      <div class="card h-100 shadow-sm p-2">
        <!-- Product Image -->
        <a href="/products/view/{{ recommend.id }}" class="text-decoration-none">
          <img src="https://lh3.googleusercontent.com/d/{{ recommend.ProductImage }}" 
               alt="Product Image" class="card-img-top img-fluid rounded"
               style="height: 100px; object-fit: cover;">
        </a>
        
        <!-- Card Body -->
        <div class="card-body p-2 text-start">
          <h6 class="card-title text-truncate">{{ recommend.ProductName }}</h6>

          <!-- Store Name -->
          <p class="text-muted small mb-1 text-truncate">Store: {{ recommend.MSStore.StoreName }}</p>

          <!-- Views -->
          <p class="text-muted small mb-1 text-center" >üëÅ {{ recommend.ProductViews }}</p>

          <!-- Rating -->
          <p class="text-muted small mb-1">
            
            {% if recommend.recom_average_rating is not none %}
              {% for i in range(1, 6) %}
                {% if i <= recommend.recom_average_rating %}
                  <i class="fas fa-star text-warning"></i> <!-- Full star -->
                {% elif i - 0.5 <= recommend.recom_average_rating %}
                  <i class="fas fa-star-half-alt text-warning"></i> <!-- Half star -->
                {% else %}
                  <i class="far fa-star text-warning"></i> <!-- Empty star -->
                {% endif %}
              {% endfor %}
            {% else %}
              No ratings yet
            {% endif %}
          </p>
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  <!-- End Recommended Products Grid -->
</div>